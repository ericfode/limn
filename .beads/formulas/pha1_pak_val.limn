# Bead: Phase 1 - Package Validation
# pha (phase) 1 | pak (package) val (validation)

# ============================================================================
# Task: Implement package structure validation in Limn
# ============================================================================

whe bea_nom
whe bea_pha
whe bea_sta
whe bea_des
whe bea_dep

bea_nom sa "pha1_pak_val"
bea_pha sa 1
bea_sta sa "pen"  # pending

# dep (dependencies): needs manifest parser
bea_dep sa gro | "pha1_pak_man" |

# ============================================================================
# Implementation: Package validation constraints
# ============================================================================

# New wor (words) for validation:
whe wor_val   # validate
whe wor_exi   # exists
whe wor_dir   # directory
whe wor_str   # structure

# Validation structure:
whe val_pak_dir
whe val_pak_man_exi   # manifest exists
whe val_pak_src_exi   # src/ exists
whe val_pak_ent_exi   # entry file exists
whe val_res           # validation result

# Constraints for valid package:
# val_pak_man_exi sa 1 | val_pak_ent_exi sa 1 | val_res sa 1
# val_pak_man_exi sa 0 | val_res sa 0
# val_pak_ent_exi sa 0 | val_res sa 0

whe val_err_msg
whe val_err_cod

# Error codes:
# 0 = no error
# 1 = missing manifest
# 2 = missing entry
# 3 = invalid manifest format

val_pak_man_exi sa 0 cau val_err_cod sa 1
val_pak_ent_exi sa 0 cau val_err_cod sa 2
val_res sa 1 cau val_err_cod sa 0

---
# key: define task
bea_des sa "Implement package structure validation using Limn constraints. Extend vocabulary with val (validate), exi (exists), dir (directory), str (structure). Validate pak.limn exists, entry file exists, structure correct."
